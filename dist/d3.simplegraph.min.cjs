/*! For license information please see d3.simplegraph.min.cjs.LICENSE.txt */
(()=>{"use strict";var t,e,s={},r={};function n(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return s[t](i,i.exports,n),i.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"==typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"==typeof i.then)return i}var r=Object.create(null);n.r(r);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&s&&i;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>i[t]));return o.default=()=>i,n.d(r,o),r},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};n.d(o,{default:()=>m});const a=require("d3");var l=n.t(a,2);const c=["diamond","circle","square","triangle","triangle-up","triangle-down"];function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function u(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function y(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function g(t){for(var e in(t=t||{}).container=t.container||"body",t.margins=t.margins||{},t.axis=t.axis||{},t.styles=t.styles||{},this.allowDrawBeyondGraph=!!t.allowDrawBeyondGraph,Array.isArray(t.margins)&&(t.margins={top:t.margins[0],right:t.margins[1],bottom:t.margins[2],left:t.margins[3]}),this.margins={left:t.margins.left||0===t.margins.left?t.margins.left:40,right:t.margins.right||0===t.margins.right?t.margins.right:20,top:t.margins.top||0===t.margins.top?t.margins.top:20,bottom:t.margins.bottom||0===t.margins.bottom?t.margins.bottom:40},this.containerWidth=t.width||600,this.containerHeight=t.height||400,this.width=this.containerWidth-this.margins.left-this.margins.right,this.height=this.containerHeight-this.margins.top-this.margins.bottom,this.color=t.colorScale?t.colorScale:a.scaleOrdinal(a.schemeCategory10),this.customColors={},this.svg=a.select(t.container).append("svg").attr("width",this.containerWidth).attr("height",this.containerHeight).style("font-family","'Century Gothic', CenturyGothic, Geneva, AppleGothic, sans-serif").style("overflow","visible"),this.svgDefs=this.svg.append("defs"),this.svgGraph=this.svg.append("g").attr("transform","translate("+this.margins.left+","+this.margins.top+")"),t.styles)this.svg.style(e,t.styles[e]);return this.resetAxisOptions(t.axis),this}g.prototype.getSvgElement=function(){return this.svg},g.prototype.getSvgGraphic=function(){return this.svgGraph},g.prototype.remove=function(){return this.svg.remove(),this},g.prototype.destroy=function(){this.svg.remove(),this.svg=null,this.svgGraph=null,this.clearAllData(),this.color=null,this.customColors=null,this.x=null,this.y=null,this.minMax=null,this.xScale=null,this.yScale=null,this.yAxis=null,this.xAxis=null,this.yGridAxis=null,this.xGridAxis=null,this.points=null,this.ptSeriesShapes=null,this.lines=null,this.pointLines=null,this.areas=null},function(t,e){t.prototype.resetAxisOptions=function(t){var i=this;return t||(t={}),t.x||(t.x={}),t.y||(t.y={}),t.styles||(t.styles={}),this.axisStyles=t.style,this.axisStyles=this.axisStyles||{},this.axisStyles.fill=this.axisStyles.fill||"none",this.axisStyles["stroke-width"]=this.axisStyles["stroke-width"]||.5,this.axisStyles.stroke=this.axisStyles.stroke||"black",["x","y","y2"].forEach((function(s){if(!t[s]){if("y2"===s)return;t[s]={}}t[s].scale||(t[s].scale=e.scaleLinear);var r,n,o=t[s].scale===e.scaleTime||t[s].scale===e.scaleUtc,a=!o&&t[s].scale===e.scaleLog;if(t[s].format||(t[s].format=o?"%Y-%m-%d":".0f"),t[s].grid||(t[s].grid={}),a&&!t[s].logBase&&(t[s].logBase=10),i[s]={label:null===t[s].label?"x"===s?"x-value":"y-value":t[s].label,isDate:o,isLog:a},o?t[s].scale===e.scaleUtc?i[s].format=e.utcFormat(t[s].format):i[s].format=e.timeFormat(t[s].format):i[s].format=e.format(t[s].format),i[s].min=t[s].min?t[s].min:0,i[s].max=t[s].max?t[s].max:100,i[s].scale=t[s].scale(),a&&i[s].scale.base(t[s].logBase),t[s].break){i[s].break=t[s].break,r=[i[s].min,i[s].break.domain[0],i[s].break.domain[1],i[s].max];var l=o?r.map((function(t){return t.getTime()})):r,c="x"===s?i.width:i.height;n="x"===s?[0,0,0,c]:[c,0,0,0];var h=(c-i[s].break.rangegap)/(l[1]-l[0]+l[3]-l[2]);n[1]=h*(l[1]-l[0]),n[2]=n[1]+i[s].break.rangegap}else r=[i[s].min,i[s].max],n="x"===s?[0,i.width]:[i.height,0];i[s].scale.domain(r).range(n);var u=!1;"x"===s?(u=!0,i[s].axis=e.axisBottom(i[s].scale),i[s].axisTwo=e.axisTop(i[s].scale),i[s].gridAxis=e.axisBottom(i[s].scale)):"y2"===s?(i[s].axis=e.axisRight(i[s].scale),i[s].gridAxis=e.axisRight(i[s].scale)):(i[s].axis=e.axisLeft(i[s].scale),i[s].gridAxis=e.axisLeft(i[s].scale)),a?(i[s].axis.tickFormat(i[s].format),t[s].ticks?i[s].axis.ticks(t[s].ticks,i[s].format):(i[s].axis.ticks(i[s].format),t[s].tickValues&&i[s].axis.tickValues(t[s].tickValues)),u&&(i[s].axisTwo.tickFormat(i[s].format),t[s].ticks?i[s].axisTwo.ticks(t[s].ticks,i[s].format):(i[s].axisTwo.ticks(i[s].format),t[s].tickValues&&i[s].axisTwo.tickValues(t[s].tickValues)))):(i[s].axis.tickFormat(i[s].format),t[s].tickValues?(i[s].axis.tickValues(t[s].tickValues),i[s].gridAxis.tickValues(t[s].tickValues)):(t[s].ticks||0===t[s].ticks)&&(Array.isArray(t[s].ticks)?(i[s].axis.ticks(t[s].ticks[0],t[s].ticks[1]),i[s].gridAxis.ticks(t[s].ticks[0],t[s].ticks[1])):(i[s].axis.ticks(t[s].ticks),i[s].gridAxis.ticks(t[s].ticks))),i[s].gridAxis.tickFormat(i[s].format),t[s].grid.tickValues?i[s].gridAxis.tickValues(t[s].grid.tickValues):(t[s].grid.ticks||0===t[s].grid.ticks)&&(Array.isArray(t[s].grid.ticks)?i[s].gridAxis.ticks(t[s].grid.ticks[0],t[s].grid.ticks[1]):i[s].gridAxis.ticks(t[s].grid.ticks)),u&&(i[s].axisTwo.tickFormat(i[s].format),t[s].tickValues?i[s].axisTwo.tickValues(t[s].tickValues):(t[s].ticks||0===t[s].ticks)&&(Array.isArray(t[s].ticks)?i[s].axisTwo.ticks(t[s].ticks[0],t[s].ticks[1]):i[s].axisTwo.ticks(t[s].ticks))))})),this.minMax={x:[this.x.min,this.x.max],y:[this.y.min,this.y.max]},this.xScale=this.x.scale,this.xAxis=this.x.axis,this.xGridAxis=this.x.gridAxes,this.yScale=this.y.scale,this.yAxis=this.y.axis,this.yGridAxis=this.y.gridAxes,this.removeAll(),this.drawAxes(),this},t.prototype.drawAxes=function(t,e,i){var s=this;e?"top"!==(e=e.toLowerCase().trim())&&(e="bottom"):e="bottom";var r,n=0;"top"!==e?(r=this.x.axis,n=this.height):r=this.x.axisTwo,i||(i=0),this.svg.selectAll(".sg-xaxis, .sg-yaxis, .sg-y2axis, .sg-axis-label").remove();var o=this.svgGraph.append("g").attr("class","sg-xaxis").attr("transform","translate(0,"+n+")").call(r).attr("font-size",null).attr("font-family",null),a=this.svgGraph.append("g").attr("class","sg-yaxis").call(this.y.axis).attr("font-size",null).attr("font-family",null),l=this.y2?this.svgGraph.append("g").attr("class","sg-y2axis").attr("transform","translate("+this.width+",0)").call(this.y2.axis).attr("font-size",null).attr("font-family",null):null;this.svgGraph.selectAll(".tick line").style("stroke","#000");var c=this.svgGraph.selectAll(".sg-xaxis .domain, .sg-yaxis .domain, .sg-y2axis .domain");for(var h in this.axisStyles)c.style(h,this.axisStyles[h]);var u={x:0,y:0,y2:0};this.svgGraph.selectAll(".sg-xaxis .tick").each((function(){this.getBBox().height>u.x&&(u.x=this.getBBox().height)})),this.svgGraph.selectAll(".sg-yaxis .tick").each((function(){this.getBBox().width>u.y&&(u.y=this.getBBox().width)})),this.svgGraph.selectAll(".sg-y2axis .tick").each((function(){this.getBBox().width>u.y2&&(u.y2=this.getBBox().width)}));var p={a:"middle",x:.5*this.width,y:"top"===e?-(u.x+i):u.x+10+i},y={a:"middle",x:-.5*this.height,y:-(u.y+10+i)},f={a:"middle",x:.5*this.height,y:-(u.y2+10+i)},d="center",g="center",m="center",x="outside",v="outside",b="outside";return t&&((t||"").toLowerCase().split(/[ ,]+/).forEach((function(t){var r=t.trim().split("-"),n=r.length>1&&r[0];switch(t=r.length>1?r[r.length-1]:r[0]){case"outside":n&&"x"!==n||(p.y="top"===e?-(u.x+i):u.x+10+i,x="outside"),n&&"y"!==n||(y.y=-(u.y+10+i),v="outside"),n&&"y2"!==n||(f.y=-(u.y2+10+i),b="outside");break;case"inside":n&&"x"!==n||(p.y="top"===e?14+i:-(6+i),x="inside"),n&&"y"!==n||(y.y=5,v="inside"),n&&"y2"!==n||(f.y=5,b="inside");case"center":n&&"x"!==n||(p.a="middle",p.x=.5*s.width,d="center"),n&&"y"!==n||(y.a="middle",y.x=-.5*s.height,g="center"),n&&"y2"!==n||(f.a="middle",f.x=.5*s.height,m="center");break;case"left":p.a="start",p.x=0,d="left";break;case"right":p.a="end",p.x=s.width,d="right";break;case"top":n&&"y"!==n||(y.a="end",y.x=0,g="top"),n&&"y2"!==n||(f.a="start",f.x=0,m="top");break;case"bottom":n&&"y"!==n||(y.a="start",y.x=-s.height,g="bottom"),n&&"y2"!==n||(f.a="end",f.x=s.height,m="bottom")}})),"inside"===x&&("left"===d?p.x+=10:"right"===d&&this.y2&&(p.x-=10),"bottom"===e?("left"===d&&"inside"===v&&"bottom"===g&&(p.x+=10,y.x+=10),"right"===d&&this.y2&&"inside"===b&&"bottom"===m&&(p.x-=10,f.x-=10)):("left"===d&&"inside"===v&&"top"===g&&(p.x+=10,y.x-=10),"right"===d&&this.y2&&"inside"===b&&"top"===m&&(p.x-=10,f.x+=10)))),"inside"===v&&("top"===g&&(y.x-=5),"bottom"===g&&(y.x+=5)),"inside"===b&&("top"===m&&(f.x+=5),"bottom"===m&&(y2LLabelPos.x-=5)),o.append("text").attr("class","sg-axis-label sg-xaxis").attr("x",p.x).attr("y",p.y).attr("fill","#000").style("text-anchor",p.a).style("font-weight","bolder").text(this.x.label),a.append("text").attr("class","sg-axis-label sg-yaxis").attr("transform","rotate(-90)").attr("x",y.x).attr("y",y.y).attr("dy",".71em").attr("fill","#000").style("text-anchor",y.a).style("font-weight","bolder").text(this.y.label),l&&l.append("text").attr("class","sg-axis-label sg-y2axis").attr("transform","rotate(90)").attr("x",f.x).attr("y",f.y).attr("dy",".71em").attr("fill","#000").style("text-anchor",f.a).style("font-weight","bolder").text(this.y2.label),this}}(g,l),function(t){t.prototype.getColorBySeriesName=function(t,e){if(!t)return null;if(t in this.customColors)return this.customColors[t];var i,s,r;if(this.points)for(var n in this.points)if(t===(i=this.points[n]).series)return i.style&&i.style.fill?i.style.fill:e||this.color.domain().indexOf(t)>=0?this.color(t):null;if(this.lines)for(var o in this.lines)if(t===(s=this.lines[o]).series)return s.style&&s.style.stroke?s.style.stroke:e||this.color.domain().indexOf(t)>=0?this.color(t):null;if(this.areas)for(var a in this.areas)if(t===(r=this.areas[a]).series)return r.style&&r.style.fill?r.style.fill:e||this.color.domain().indexOf(t)>=0?this.color(t):null;return e?this.color(t):null},t.prototype.resetColorScale=function(t){return t?this.color=t:this.color.domain([]),this},t.prototype.setSeriesColor=function(t,e){this.customColors[t]=e},t.prototype.removeSeriesColor=function(t){return this.customColors[t]&&delete this.customColors[t],this}}(g),function(t){t.prototype.drawGrid=function(t){this.svgGraph.selectAll(".sg-grid").remove();var e=t&&t.opacity?parseFloat(t.opacity):.4,i=t&&t.stroke?t.stroke:"#555",s=t&&t["stroke-width"]?parseFloat(t["stroke-width"]):.3;return this.svgGraph.append("g").attr("class","sg-grid").attr("transform","translate(0,"+this.height+")").style("opacity",e).style("stroke",i).style("stroke-width",s).call(this.x.gridAxis.tickSize(-this.height).tickFormat("")),this.svgGraph.append("g").attr("class","sg-grid").style("opacity",e).style("stroke",i).style("stroke-width",s).call(this.y.gridAxis.tickSize(-this.width).tickFormat("")),this},t.prototype.removeGrid=function(){return this.svgGraph.selectAll(".sg-grid").remove(),this},t.prototype.removeLegend=function(){return this.svg.selectAll(".sg-legend").remove(),this},t.prototype.drawLegend=function(t,e){this.removeLegend(),t?t.x&&t.y||(t.x||0===t.x||(t.x=void 0!==t[0]&&"number"==typeof t[0]?t[0]:this.width+5),t.y||0===t.y||(t.y=void 0!==t[1]&&"number"==typeof t[1]?t[1]:0)):t={x:0,y:0};var i=(e=e||{}).anchor||"left",s=e.bgstyle||{},r=e.exclude||[];r||(r=[]),"string"==typeof r&&(r=r.trim().split(/\s+/));var n={all:[],points:[],lines:[],areas:[]};r.forEach((function(t){var e=n.all,i=t.split("::").map((function(t){return t.trim()}));if(i.length>1)switch(i[1].toLowerCase()){case"point":case"points":i[0]||(n.points=!0),e=n.points;break;case"line":case"lines":i[0]||(n.lines=!0),e=n.lines;break;case"area":case"areas":i[0]||(n.areas=!0),e=n.areas;break;default:return}!0!==e&&e.push(i[0])}));var o=function(t,e){return!0===n[e]||~n[e].indexOf(t)||!n.all.indexOf(t)};if(s.padding){var a="string"==typeof s.padding?s.padding.split(" "):[s.padding];1===a.length?(s["padding-left"]=a[0],s["padding-right"]=a[0],s["padding-top"]=a[0],s["padding-bottom"]=a[0]):2===a.length?(s["padding-left"]=a[1],s["padding-right"]=a[1],s["padding-top"]=a[0],s["padding-bottom"]=a[0]):(a.length>3&&(s["padding-left"]=a[3]),s["padding-right"]=a[1],s["padding-top"]=a[0],s["padding-bottom"]=a[2]),delete s.padding}else s["padding-left"]||(s["padding-left"]=0),s["padding-right"]||(s["padding-right"]=0),s["padding-top"]||(s["padding-top"]=0),s["padding-bottom"]||(s["padding-bottom"]=0);s.fill||(s.fill="#fff",s.opacity=0),s["padding-left"]=parseInt(s["padding-left"]),s["padding-right"]=parseInt(s["padding-right"]),s["padding-top"]=parseInt(s["padding-top"]),s["padding-bottom"]=parseInt(s["padding-bottom"]);var l=this.svg.append("g").attr("class","sg-legend").attr("transform","translate("+t.x+","+t.y+")"),c=l.append("rect").attr("class","sg-legend-bg").attr("x",0).attr("y",0);for(var h in s)h.startsWith("padding")||c.style(h,s[h]);var u=e.itemsPerColumn||0,p=e.rowHeight||24,y=0,f=s["padding-top"],d=s["padding-left"];function g(){y++,u>0&&y>=u?(y=0,f=s["padding-top"],d=l.node().getBBox().width+12):f+=p}var m=this;function x(t,e,i,s){if(s){var r=f+10,n=l.append("path").attr("x",d).attr("y",f).attr("d","M"+d+" "+r+" L"+(18+d)+" "+r);for(var o in m.pointLines[0].style)n.style(o,m.pointLines[0].style[o]);n.style("stroke",m.getColorBySeriesName(t.series))}var a="function"==typeof t.size?t.size():t.size;a>14&&(a=14);var c=d+2,h=f+3;if(e&&e.startsWith("triangle")){var u=1.519676*a,p=u/2,y=.86602*u;switch(c+=7-p,h+=7-.5*y,e){case"triangle-down":l.append("polygon").attr("points","".concat(c,",").concat(h+y," ")+"".concat(c+p,",").concat(h," ")+"".concat(c+u,",").concat(h+y)).style("fill",i);break;case"triangle":case"triangle-up":l.append("polygon").attr("points","".concat(c,",").concat(h," ")+"".concat(c+p,",").concat(h+y," ")+"".concat(c+u,",").concat(h)).style("fill",i)}}else{var x=a/2,v=7-x;c+=v,h+=v,"circle"===e?l.append("circle").attr("cx",c+x).attr("cy",h+x).attr("r",x).style("fill",i):l.append("rect").attr("x",c).attr("y",h).attr("width",a).attr("height",a).attr("transform","square"==e?"":"rotate(45,".concat(c+x,",").concat(h+x,")")).style("fill",i)}l.append("text").attr("x",d+23).attr("y",f+9).attr("dy",".35em").style("text-anchor","start").text(t.series),g()}function v(t,e){var i=f+10,s=l.append("path").attr("x",d).attr("y",f).attr("d","M"+d+" "+i+" L"+(18+d)+" "+i);for(var r in t.style)s.style(r,t.style[r]);"stroke"in t.style||s.style("stroke",e),l.append("text").attr("x",d+23).attr("y",f+9).attr("dy",".35em").style("text-anchor","start").text(t.series),g()}function b(t,e){var i=l.append("rect").attr("x",d).attr("y",f).attr("width",18).attr("height",18);for(var s in t.style)i.style(s,t.style[s]);"fill"in t.style||i.style("fill",e),l.append("text").attr("x",d+23).attr("y",f+9).attr("dy",".35em").style("text-anchor","start").text(t.series),g()}if(this.areas&&!0!==n.areas)for(var _=[],A=0;A<this.areas.length;A++){var k=this.areas[A].series;if(!o(k,"areas")&&!~_.indexOf(k)){_.push(k);var w=this.getColorBySeriesName(k);b(this.areas[A],"function"==typeof w?w(this.areas[A]):w)}}if(this.lines&&!0!==n.lines)for(var S=[],L=0;L<this.lines.length;L++){var P=this.lines[L].series;if(!o(P,"lines")&&!~S.indexOf(P)){S.push(P);var G=this.getColorBySeriesName(P);v(this.lines[L],"function"==typeof G?G(this.lines[L]):G)}}if(this.points&&!0!==n.points)for(var O=[],D=0;D<this.points.length;D++){var F=this.points[D].series;if(!o(F,"points")&&!~O.indexOf(F)){O.push(F);var z=!1;if(this.pointLines)for(var C=this.pointLines.length;C--;)if(this.pointLines[C].series===F){z=!0;break}var B=this.getColorBySeriesName(F);B="function"==typeof B?B(this.points[D]):B,x(this.points[D],this.getPointSeriesShape(F),B,z)}}var N=l.node().getBBox();return c.attr("width",N.width+s["padding-left"]+s["padding-right"]).attr("height",N.height+s["padding-top"]+s["padding-bottom"]),"middle"===(i=i.trim().toLowerCase())?t.x-=.5*N.width:"right"===i&&(t.x-=N.width),l.attr("transform","translate("+t.x+","+t.y+")"),this}}(g),function(t){t.prototype.addPointData=function(t,e,i,s){this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},t=null===t?"":String(t),(s=s||{}).size=!s.size||"function"!=typeof s.size&&s.size<=0?s.size=10:s.size,s.y2Axis=!(!s.y2Axis&&!s.y2),s.shape&&this.setPointSeriesShape(t,s.shape);var r={series:t,x:e,y:parseFloat(i),y2:s.y2Axis,size:s.size,_bind:null,_keys:null};return this.points.push(r),this},t.prototype.addPointsData=function(t,e,i,s,r){var n=this;return t&&0!==t.length?(this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},(r=r||{}).size=!r.size||"function"!=typeof r.size&&r.size<=0?r.size=10:r.size,r.y2Axis=!(!r.y2Axis&&!r.y2),r.additionalDataKeys=r.additionalDataKeys||null,t.forEach((function(t,o){var a=!r.forceSeriesName&&!r.forceSeries&&e in t&&t[e],l=a?t[e]:e||0===e?e:o,c=t[i],h=t[s];l=null===l?"":String(l),r.shape&&(n.ptSeriesShapes[l]=r.shape);var u={series:l,x:c,y:parseFloat(h),y2:r.y2Axis,size:r.size,_bind:t,_keys:{x:i,y:s,additional:null}};if(a&&(u._keys.series=e),r.additionalDataKeys&&Array.isArray(r.additionalDataKeys)){var p=[];r.additionalDataKeys.forEach((function(e){for(var i=e,s=1;i in u;)i=e+String(++s);p.push({key:e,name:i}),u[i]=t[e]})),u._keys.additional=p}n.points.push(u)})),this):this},t.prototype.addPointsDataAsArray=function(t,e,i){if(!e||0===e.length)return this;this.points=this.points||[],this.ptSeriesShapes=this.ptSeriesShapes||{},t=null===t?"":String(t),(i=i||{}).size=!i.size||"function"!=typeof i.size&&i.size<=0?i.size=10:i.size,i.y2Axis=!(!i.y2Axis&&!i.y2),i.showNulls=!!i.showNulls,i.shape&&this.setPointSeriesShape(t,i.shape);var s=this;return e.forEach((function(e){var r={series:t,x:parseFloat(e[0]),y:parseFloat(e[1]),y2:i.y2Axis,size:i.size,_bind:e,_keys:{x:0,y:1,additional:null}};if(isNaN(r.y)||!r.y&&0!==r.y){if(!showNulls)return;r.y=0,r.wasNull=!0}s.points.push(r)})),this},t.prototype.clearPointsData=function(t){return null==t?this.points=null:Array.isArray(t)?this.points=this.points.filter((function(e){return~t.indexOf(e.series)})):this.points=this.points.filter((function(e){return e.series!==t})),this},t.prototype._getPointData=function(t,e){if(!this.points)return[];var i=this.points.filter((function(e){return e.series===t}));if(!i||!i.length)return this;if(e||0===e){for(;e<0;)e=i.length+e;i=[i[e]]}return i},t.prototype._clonePointData=function(t){var e={series:t.series,x:t.x,y:t.y,y2:t.y2,size:t.size};return t._keys&&(t._keys.x&&(e[t._keys.x]=t.x),t._keys.y&&(e[t._keys.y]=t.y),t._keys.additional&&t._keys.additional.forEach((function(i){e[i.name]=t[i.name]}))),e},t.prototype.getPointsDataBySeries=function(t){var e=this;return this._getPointData(t).map((function(t){return e._clonePointData(t)}))},t.prototype.getPointCoordinatesBySeries=function(t){return this._getPointData.map((function(t){return[t.x,t.y||0===t.y?t.y:t.y2]}))},t.prototype.getPointSeriesShape=function(t){return this.ptSeriesShapes=this.ptSeriesShapes||{},this.ptSeriesShapes[t]},t.prototype.setPointSeriesShape=function(t,e){return this.ptSeriesShapes=this.ptSeriesShapes||{},this.ptSeriesShapes[t]=~c.indexOf(e)?e:null,this},t.prototype.updatePointsData=function(t,e,i){return this._getPointData(t,e).forEach((function(t){["x","y","y2","size"].forEach((function(e){e in i&&null!==i[e]&&void 0!==h(i[e])&&(t[e]=i[e],t._keys&&delete t._keys[e])}))})),this._syncPointLinesData(),this},t.prototype.syncPointsData=function(){return this.points?(this.points.forEach((function(t){t._bind&&t._keys&&("series"in t._keys&&t._bind[t._keys.series],"x"in t._keys&&(t.x=parseFloat(t._bind[t._keys.x])),"y"in t._keys&&(t.y=parseFloat(t._bind[t._keys.y])),t._keys.additional&&t._keys.additional.forEach((function(e){return t[e.name]=t._bind[e.key]})))})),this._syncPointLines(),this):this}}(g),function(t,e){t.prototype.addAreaAsCoordinates=function(t,i,s){if(!i||!Array.isArray(i)||i.length<2)return this;var r={};if((s=s||{}).style)for(var n in s.style)r[n]=s.style[n];return this.areas=this.areas||[],this.areas.push({series:null===t?"":String(t),functions:null,coords:i,resolution:null,xRange:null,y2:!(!s.y2Axis&&!s.y2),style:s.style||{},interpolate:s.interpolation||e.curveLinear,_bind:{coords:i,style:r}}),this},t.prototype.addAreaBetweenTwoLines=function(t,i,s,r,n){if(!s||"function"!=typeof s)return this;if(!i||"function"!=typeof i)return this;var o={};if((n=n||{}).style)for(var a in n.style)o[a]=n.style[a];return this.areas=this.areas||[],this.areas.push({series:null===t?"":String(t),functions:[i,s],coords:null,xRange:r?u(r):null,y2:!(!n.y2Axis&&!n.y2),style:n.style||{},interpolate:n.interpolation||e.curveLinear,_bind:{xRange:r,style:o}}),this},t.prototype._getAreaData=function(t,e){if(!this.areas)return[];var i=this.areas.filter((function(e){return e.series===t}));if(!i||!i.length)return this;if(e||0===e){for(;e<0;)e=i.length+e;i=[i[e]]}return i},t.prototype._cloneAreaData=function(t){return{series:t.series,functions:t.functions?u(t.functions):null,coords:t.coords?t.coords.map((function(t){return u(t)})):null,xRange:t.xRange?u(t.xRange):null,y2:t.y2,style:t.style,interpolate:t.interpolate}},t.prototype.getAreasDataBySeries=function(t,e){var i=this;return this._getAreaData(t,e).map((function(t){return i._cloneAreaData(t)}))},t.prototype.updateAreaData=function(t,e,i){return this._getAreaData(t,e).forEach((function(t){if(i.lineFunctionTop||i.functionTop||i.lineFunctionBottom||i.functionBottom)t.functions=[i.lineFunctionBottom||i.functionBottom||t.functions&&t.functions[0],i.lineFunctionTop||i.functionTop||t.functions&&t.functions[1]],t.functions[0]||(t.functions[0]=function(t){return 0}),t.functions[1]||(t.functions[1]=function(t){return 0}),i.xRange&&(t.xRange=u(i.xRange),t._bind&&(t._bind.xRange=i.xRange)),t.coords=null,t._bind&&delete t._bind.coords;else if(i.coordinates||i.coords){var e=i.coordinates||i.coords;t.coords=u(e),t.functions=null,t._bind&&(t._bind.coords=e,delete t._bind.xRange)}if(t.interpolate=i.interpolate||t.interpolate,i.style){for(var s in t.style={},i.style)t.style[s]=i.style[s];t._bind&&(t._bind.style=i.style)}})),this},t.prototype.clearAreasData=function(t){return null==t?this.areas=null:Array.isArray(t)?this.areas=this.areas.filter((function(e){return~t.indexOf(e.series)})):this.areas=this.areas.filter((function(e){return e.series!==t})),this},t.prototype.syncAreasData=function(){return this.areas?(this.areas.forEach((function(t){if(t._bind.xRange&&(t.xRange=u(t._bind.xRange)),t._bind.coords&&(t.coords=t._bind.coords.map((function(t){return u(t)}))),t._bind.style)for(var e in t.style={},update.style)t.style[e]=update.style[e]})),this):this}}(g,l),function(t,e){t.prototype.addLineDataAsCoordinates=function(t,i,s){if(!i||0===i.length)return this;this.lines=this.lines||[];var r={};if((s=s||{}).style)for(var n in s.style)r[n]=s.style[n];return r["stroke-width"]&&"number"==typeof r["stroke-width"]||(r["stroke-width"]=1.5),this.lines.push({series:null===t?"":String(t),lineFunction:null,coords:i.map((function(t){return y(t)})),xRange:null,y2:!(!s.y2Axis&&!s.y2),style:r,interpolate:s.interpolation||e.curveLinear,_bind:{coords:i,style:r}}),this},t.prototype.addLineDataAsFunction=function(t,i,s,r){if(!i||"function"!=typeof i||"number"!=typeof i(0))return this;this.lines=this.lines||[];var n=(r=r||{}).style||{};if(r.style)for(var o in r.style)n[o]=r.style[o];n["stroke-width"]&&"number"==typeof n["stroke-width"]||(n["stroke-width"]=1.5);var a=a||e.curveLinear;return this.lines.push({series:null===t?"":String(t),lineFunction:i,coords:null,xRange:s?y(s):null,y2:!(!r.y2Axis&&!r.y2),style:n,interpolate:r.interpolation||e.curveLinear,_bind:{xRange:s,style:n}}),this},t.prototype.addLinesDataFromPoints=function(t,i){if(!this.points||0===this.points.length)return this;var s=(i=i||{}).handleOverlap?i.handleOverlap.toLowerCase():"average",r={};if(i.style)for(var n in i.style)r[n]=i.style[n];r["stroke-width"]&&"number"==typeof r["stroke-width"]||(r["stroke-width"]=1.5),r.stroke&&delete r.stroke;for(var o={},a=0;a<this.points.length;a++){var l=this.points[a].series;l in o?(o[l].y2=this.points[a].y2,o[l].points.push(this.points[a])):o[l]={points:[this.points[a]]}}var c=function(t){return!0};for(var h in t&&("function"==typeof t?c=t:"string"==typeof t?c=function(e){return e===t}:Array.isArray(t)&&(c=function(e){return~t.indexOf(e)})),this.pointLines=[],o)if(c(h)&&!(o[h].points.length<2)){var u=this._getPointLine(o[h].points,s);u.length>=2&&this.pointLines.push({series:h,lineFunction:null,resolution:null,coords:u,xRange:null,y2:o[h].y2,style:r,interpolate:i.interpolation||e.curveLinear,bind:{style:r}})}return this},t.prototype._getPointLine=function(t,e){t.sort((function(t,e){return t.x-e.x}));for(var i=[],s=0;s<t.length;++s){for(var r=t[s],n=[r.y],o=[r.x,r.y],a=!1;s+1<t.length&&(r=t[s+1]).x===o[0];)a=!0,n.push(r.y),++s;if(a)if(~["mean","average"].indexOf(e))o[1]=n.reduce((function(t,e){return t+e}));else switch(n.sort(),e){case"lowest":case"min":o[1]=n[0];break;case"highest":case"max":o[1]=n[n.length-1];break;case"median":o[1]=n[Math.floor(.5*n.length)];break;default:throw"Unknown handle overlap operation: ".concat(e)}i.push(o)}return i},t.prototype.clearLinesData=function(t){return null==t?this.lines=null:Array.isArray(t)?this.lines=this.lines.filter((function(e){return~t.indexOf(e.series)})):this.lines=this.lines.filter((function(e){return e.series!==t})),this},t.prototype.clearPointLinesData=function(t){return null==t?this.pointLines=null:Array.isArray(t)?this.pointLines=this.pointLines.filter((function(e){return~t.indexOf(e.series)})):this.pointLines=pointLines.lines.filter((function(e){return e.series!==t})),this},t.prototype._getLineData=function(t,e){if(!this.lines)return[];var i=this.lines.filter((function(e){return e.series===t}));if(!i||!i.length)return[];if(e||0===e){for(;e<0;)e=i.length+e;i=[i[e]]}return i},t.prototype._cloneLineData=function(t){return{series:t.series,lineFunction:t.lineFunction,coords:t.coords?t.coords.map((function(t){return y(t)})):null,xRange:t.xRange?y(t.xRange):null,y2:t.y2,style:t.style,interpolate:t.interpolate}},t.prototype.getLinesDataBySeries=function(t,e){var i=this;return this._getLineData(t,e).map((function(t){return i._cloneLineData(t)}))},t.prototype.updateLinesData=function(t,e,i){return this._getLineData(t,e).forEach((function(t){if(i.lineFunction||i.function)t.lineFunction=i.lineFunction||i.function||t.lineFunction,i.xRange&&(t.xRange=y(i.xRange),t._bind&&(t._bind.xRange=i.xRange)),t.coords=null,t._bind&&delete t._bind.coords;else if(i.coordinates||i.coords){var e=i.coordinates||i.coords;t.coords=y(e),t._bind&&(t._bind.coords=e,delete t._bind.xRange)}if(t.interpolate=i.interpolate||t.interpolate,i.style){for(var s in t.style={},i.style)t.style[s]=i.style[s];t.style["stroke-width"]&&"number"==typeof t.style["stroke-width"]||(t.style["stroke-width"]=1.5),t._bind&&(t._bind.style=i.style)}})),this},t.prototype.syncLinesData=function(){return this.lines?(this.lines.forEach((function(t){if(t._bind.xRange&&(t.xRange=y(t._bind.xRange)),t._bind.coords&&(t.coords=t._bind.coords.map((function(t){return y(t)}))),t._bind.style){for(var e in t.style={},t._bind.style)t.style[e]=t._bind.style[e];t.style["stroke-width"]&&"number"==typeof t.style["stroke-width"]||(t.style["stroke-width"]=1.5)}})),this):this},t.prototype._syncPointLines=function(){var t=this;if(this.pointLines){var e={};this.points.forEach((function(s){var r=s.series;r in e?e[r].push(t.points[i]):e[r]=[t.points[i]]})),this.pointLines=this.pointLines.filter((function(i){if(!(i.series in e))return!1;if(i.coords=t._getPointLine(e[i.series]),i._bind.style){for(var s in i.style={},i._bind.style)i.style[s]=i._bind.style[s];i.style["stroke-width"]&&"number"==typeof i.style["stroke-width"]||(i.style["stroke-width"]=1.5)}return!0}))}}}(g,l),function(t){t.prototype._findIntercept=function(t,e,i,s){var r,n=t(e),o=t(i),a=s?this.y2:this.y;if(n<a.min!=o<a.min)r=a.min;else{if(n>a.max==o>a.max)return null;r=a.max}var l,c,h,u,p,y=e+.5*(i-e),f=.25*Math.abs(i-e),d=n,g=e;e-=1e-5,i+=1e-5;for(var m=0;m++<100;){if(l=t(y),c=Math.abs(l-r),y>=this.x.min&&y<=this.x.max&&c<1e-6)return[y,r];if(m>0&&u<c?(y=g,l=d,f*=.5):((h=l>r!=(y>g==l>d))!==p&&(f*=.5),g=y,d=l,p=h,u=c),(y+=p?f:-f)<e||y>i)return null}return null},t.prototype._getLineSegmentsFromCoordinates=function(t,e){for(var i=e?this.y2:this.y,s=[],r=[],n=null,o=!1,a=!1,l=0;l<t.length;l++){var c=t[l];if(void 0!==c[1]&&null!==c[1]){var h=n?(t[l][1]-n[1])/(t[l][0]-n[0]):0;if(o){if(!a&&c[0]>=this.x.max&&(a=!0,c[0]>this.x.max)){if(!n)break;c=[this.x.max,n[0]+h*(c[1]-n[1])]}if(c[1]>=i.min&&c[1]<=i.max){if(0===r.length&&n&&0!==h){var u=h>0?i.min:i.max;c=[(this.x.isDate?n[0].getTime():n[0])+(u-n[1])/h,u],this.x.isDate&&(c[0]=new Date(c[0])),l--}r.push(c)}else r.length>0&&(u=h>0?i.max:i.min,c=[(this.x.isDate?n[0].getTime():n[0])+(u-n[1])/h,u],this.x.isDate&&(c[0]=new Date(c[0])),r.push(c)),r.length>1&&(s.push(r),r=[]);if(a)break;n=c}else{if(c[0]>=this.x.min){if(o=!0,c[0]>this.x.min&&n){var p=[this.x.min,n[0]+h*(c[1]-n[1])];p[1]>=i.min&&p[1]<=i.max&&r.push(p)}c[1]>=i.min&&c[1]<=i.max&&r.push(c)}n=c}}else r.length>1&&s.push(r),r=[],n=null}return r.length>1&&s.push(r),s},t.prototype._getLineSegmentsFromFunction=function(t,e,i,s,r){var n;if(i?(i[0]<this.x.min&&(i[0]=this.x.min),i[1]>this.x.max&&(i[0]=this.x.max)):i=[this.x.min,this.x.max],e&&"number"==typeof e||(e=Math.floor((this.width-this.margins.left-this.margins.right)/10)),e<2&&(e=2),this.x.isLog){var o=Math.pow(i[1]/i[0],1-e);n=function(t){return(t*=o)>i[1]?i[1]:t}}else{var a=(i[1]-i[0])/(e-1),l=this.x.isDate;n=function(t){return l?new DateUTC(t.getTime()+a):t+a}}for(var c=[],h=[],u=i[0],p=u,y=s?this.y2:this.y;;){var f=!1;(u>=i[1]||isNaN(u))&&(u=i[1],f=!0);var d=t(u);if(r){var g;if(d>=y.min&&d<=y.max)0===h.length&&u>i[0]&&(g=this._findIntercept(t,p,u,s))&&h.push(g),h.push([u,d]);else h.length>0&&(g=this._findIntercept(t,p,u,s))&&h.push(g),h.length>1&&(c.push(h),h=[]);if(p=u,u=n(u),f)break}else h.push([u,d])}return h.length>1&&c.push(h),c},t.prototype._getAreaPolysFromCoordinates=function(t,e){for(var i=[],s=[],r=0;r<t.length;r++)i.push([t[r][0],t[r][1]]),s.push([t[r][0],t[r][2]]);return this._getAreaPolysFromLineCrosswalk(this._getLineSegmentsFromCoordinates(i,e),this._getLineSegmentsFromCoordinates(s,e),e)},t.prototype._getAreasPolysFromFunctions=function(t,e,i,s,r,n){return this._getLineSegmentsFromFunction(t,i,s,r,n),this._getLineSegmentsFromFunction(e,i,s,r,n),this._getAreaPolysFromLineCrosswalk(this._getLineSegmentsFromFunction(t,i,s,r,n),this._getLineSegmentsFromFunction(e,i,s,r,n),r)},t.prototype._getAreaPolysFromLineCrosswalk=function(t,e,i){for(var s,r,n=[],o=[],a=[0,0],l=[0,0],c=[!1,!1],h=[!1,!1];;){s=c[0]?null:t[a[0]][l[0]],r=c[1]?null:e[a[1]][l[1]];var u=[!1,!1];if(!s&&!r)break;s&&r?s[0]===r[0]?(o.push([s[0],s[1],r[1]]),u[0]=u[1]=!0):(s[0]<r[0]?u[0]=!0:u[1]=!0,o.length>=2&&n.push(o),o=[]):(u=[!0,!0],o.length>=2&&n.push(o),o=[]);for(var p=[!1,!1],y=0;y<2;y++)if(!c[y]){var f=0===y?t:e;u[y]&&(l[y]+=1),h[y]=l[y]>=f[a[y]].length,h[y]&&(a[y]+=1,l[y]=0,p[y]=!0,c[y]=a[y]>=f.length)}if(p[0]&&p[1]&&(o.length>=2&&n.push(o),o=[]),c[0]&&c[1]){o.length>=2&&n.push(o);break}}return n}}(g),function(t,e){t.prototype.removePoints=function(t){return null==t?this.svgGraph.selectAll(".sg-point").remove():(t=Array.isArray(t)?t:[t],this.svgGraph.selectAll(".sg-point").filter((function(e){return~t.indexOf(e.series)})).remove()),this},t.prototype.drawPoints=function(t,e){var i=this;if(this.removePoints(),!this.points||0===this.points.length)return this;var s=this.points;if(this.allowDrawBeyondGraph||(s=s.filter((function(e){if(!e.x&&0!==e.x||Number.isNaN(e.x))return!1;if(e.x<i.x.min||e.x>i.x.max)return!1;if(i.x.break&&e.x>i.x.break.domain[0]&&e.x<i.x.break.domain[1])return!1;if(!t&&isNaN(e.y))return!1;var s=e.y2?i.y2:i.y;return!(e.y<s.min||e.y>s.max||s.break&&e.y>s.break.domain[0]&&e.y<s.break.domain[1])}))),!s.length)return this;var r={};for(var n in s.forEach((function(t){t.series in r?r[t.series].push(t):r[t.series]=[t]})),r)this._drawPoints(this.svgGraph.selectAll(".sg-temporary-point").data(r[n]).enter(),this.ptSeriesShapes[n],e);return this},t.prototype.drawUpdatePoints=function(t,i){var s=this;if(!this.points||0===this.points.length)return this.removePoints(),this.removePointLines(),this;i&&(Object.getPrototypeOf(i)!==Object.prototype&&(i={}),i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut);var r=this.points;this.allowDrawBeyondGraph||(r=r.filter((function(e){if(!e.x&&0!==e.x||Number.isNaN(e.x))return!1;if(e.x<s.x.min||e.x>s.x.max)return!1;if(s.x.break&&e.x>s.x.break.domain[0]&&e.x<s.x.break.domain[1])return!1;if(!t&&isNaN(e.y))return!1;var i=e.y2?s.y2:s.y;return!(e.y<i.min||e.y>i.max||i.break&&e.y>i.break.domain[0]&&e.y<i.break.domain[1])})));var n={};r.forEach((function(t){t.series in n?n[t.series].push(t):n[t.series]=[t]}));var o,a,l,c,h=function(t){var e;o=n[t],a=s.ptSeriesShapes[t],(l=s.svgGraph.selectAll(".sg-point").filter((function(e){return e.series===t}))).filter((function(t){return!~o.indexOf(t)})).remove(),l=l.filter((function(t){return~o.indexOf(t)})),c=function(t){if(Array.isArray(t))return d(t)}(e=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l.each((function(t){var e=c.indexOf(t);~e&&c.splice(e,1)})),s._drawPoints(s.svgGraph.selectAll(".sg-temporary-point").data(c).enter(),a,i),s._updatePoints(l,a,i)};for(var u in n)h(u);return this},t.prototype._drawPoints=function(t,i,s){if(t.size()){var r;switch(i){case"triangle":case"triangle-up":case"triangle-down":r=t.append("polygon");break;case"square":case"diamond":r=t.append("rect");break;default:r=t.append("circle")}r=this._formatPoint(r,i,s),s&&(Object.getPrototypeOf(s)!==Object.prototype&&(s={}),s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,r.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}},t.prototype._updatePoints=function(t,i,s){t.size()&&(s&&(Object.getPrototypeOf(s)!==Object.prototype&&(s={}),s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,t=t.transition().duration(s.duration).ease(s.ease)),this._formatPoint(t,i))},t.prototype._formatPoint=function(t,e,i){var s=this;switch(e){case"triangle-down":t.attr("series",(function(t){return t.series})).style("opacity",i?0:1).attr("class","sg-point sg-point-td").attr("points",(function(t){var e=e="function"==typeof t.size?t.size():t.size,i=1.519676*e,r=.86602*i*.5,n=.5*i,o=s.x.scale(t.x),a=isNaN(t.y)?0:t.y;return a=(t.y2?s.y2.scale:s.y.scale)(a),"".concat(o-n,",").concat(a+r," ").concat(o,",").concat(a-r," ").concat(o+n,",").concat(a+r)}));break;case"triangle":case"triangle-up":t.attr("series",(function(t){return t.series})).style("opacity",i?0:1).attr("class","sg-point sg-point-tu").attr("points",(function(t){var e=e="function"==typeof t.size?t.size(t,t._bind):t.size,i=1.519676*e,r=.86602*i*.5,n=.5*i,o=s.x.scale(t.x),a=isNaN(t.y)?0:t.y;return a=(t.y2?s.y2.scale:s.y.scale)(a),"".concat(o-n,",").concat(a-r," ").concat(o,",").concat(a+r," ").concat(o+n,",").concat(a-r)}));break;case"square":case"diamond":t.attr("series",(function(t){return t.series})).style("opacity",i?0:1).attr("class","sg-point sg-point-sd").attr("width",(function(t){return"function"==typeof t.size?t.size():t.size})).attr("height",(function(t){return"function"==typeof t.size?t.size():t.size})).attr("x",(function(t){var e="function"==typeof t.size?t.size():t.size;return s.x.scale(t.x)-e/2})).attr("y",(function(t){isNaN(t.y)||t.y;var e="function"==typeof t.size?t.size():t.size;return(t.y2?s.y2.scale:s.y.scale)(t.y)-e/2})).attr("transform",(function(t){if("diamond"!==e)return"";var i=isNaN(t.y)?0:t.y;return"rotate(45,".concat(s.x.scale(t.x),",").concat((t.y2?s.y2.scale:s.y.scale)(i),")")}));break;default:t.style("opacity",i?0:1).attr("series",(function(t){return t.series})).attr("class","sg-point sg-point-cr").attr("r",(function(t){return.5*("function"==typeof t.size?t.size(t):t.size)})).attr("cx",(function(t){return s.x.scale(t.x)})).attr("cy",(function(t){var e=isNaN(t.y)?0:t.y;return(t.y2?s.y2.scale:s.y.scale)(e)}))}return t.style("fill",(function(t){var e=s.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})).style("stroke",(function(t){var e=s.getColorBySeriesName(t.series,!0);return"function"==typeof e?e(t):e})),t}}(g,l),function(t,e){t.prototype.removeAllLines=function(t){return this.removeLines(t).removePointLines(t)},t.prototype.removeLines=function(t){var e;return null==t?e=this.svgGraph.selectAll(".sg-line").remove():(e=Array.isArray(t)?t:[t],this.svgGraph.selectAll(".sg-line").filter((function(e){return~t.indexOf(e.series)})).remove()),e.each((function(t){t._segments=null,t._d3s=null})),this},t.prototype.removePointLines=function(t){var e;return null==t?e=this.svgGraph.selectAll(".sg-point-line").remove():(e=Array.isArray(t)?t:[t],this.svgGraph.selectAll(".sg-point-line").filter((function(e){return~t.indexOf(e.series)})).remove()),e.each((function(t){t._segments=null,t._d3s=null})),this},t.prototype.drawAllLines=function(t,e){return this.drawPointLines().drawLines(t,e)},t.prototype.drawLines=function(t,e){if(this.removeLines(),t||0===t?t<=2&&(t=2):t=20,!this.lines)return this;var i=this;return this.lines.forEach((function(e){e.lineFunction?e._segments=i._getLineSegmentsFromFunction(e.lineFunction,t,e.xRange,e.y2Axis,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?e._segments=[e.coords]:e._segments=i._getLineSegmentsFromCoordinates(e.coords,e.y2),e._segments&&(e._segments=e._segments.filter((function(t){return t&&t.length>=2})))})),this._drawLines(this.lines,"sg-line"),this},t.prototype.drawPointLines=function(t){if(this.removePointLines(),!this.pointLines)return this;var e=this;return this.pointLines.forEach((function(t){e.allowDrawBeyondGraph?t._segments=[t.coords]:t._segments=e._getLineSegmentsFromCoordinates(t.coords,t.y2),t._segments&&(t._segments=t._segments.filter((function(t){return t&&t.length>=2})))})),this._drawLines(this.pointLines,"sg-point-line",t),this},t.prototype.drawUpdateAllLines=function(t,e){return this.drawUpdateLines(t,e).drawUpdatePointLines(e)},t.prototype.drawUpdateLines=function(t,i){t||0===t?t<=2&&(t=2):t=20,i&&(Object.getPrototypeOf(i)!==Object.prototype&&(i={}),i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut);var s=this;return this.lines.forEach((function(e){e.lineFunction?e._segments=s._getLineSegmentsFromFunction(e.lineFunction,t,e.xRange,e.y2Axis,!s.allowDrawBeyondGraph):s.allowDrawBeyondGraph?e._segments=[e.coords]:e._segments=s._getLineSegmentsFromCoordinates(e.coords,e.y2),e._segments&&(e._segments=e._segments.filter((function(t){return t&&t.length>=2})))})),s._updateLines(this.lines,"sg-line",i),this},t.prototype.drawUpdatePointLines=function(t){t&&(Object.getPrototypeOf(t)!==Object.prototype&&(t={}),t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut);var i=this;return this.pointLines.forEach((function(t){i.allowDrawBeyondGraph?t._segments=[t.coords]:t._segments=i._getLineSegmentsFromCoordinates(t.coords,t.y2),t._segments&&(t._segments=t._segments.filter((function(t){return t&&t.length>=2})))})),i._updateLines(this.pointLines,"sg-point-line",t),this},t.prototype._drawLines=function(t,i,s){var r=this,n=this,o=this.svgGraph.selectAll(".sg-temporary-line").data(t).enter().append("path").attr("series",(function(t){return t.series})).attr("class",i).style("opacity",s?0:1).style("fill","none").attr("d",(function(t){var i=t.y2?r.y2:r.y,s=e.line().x((function(t){return r.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),r=t.style||{};for(var o in r)(!s||o&&"opacity"!=o.toLowerCase())&&i.style(o,r[o]);if(!("stroke"in r)){var a=n.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof a?a(t):a)}t._d3s=i}));s&&(Object.getPrototypeOf(s)!==Object.prototype&&(s={}),s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,o.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))},t.prototype._updateLines=function(t,i,s){var r=this;if(!t)return this;var n=t.filter((function(t){return t._segments&&t._segments.length&&!t._segments.filter((function(t){return t.length<2})).length?!t._d3s:(segments._d3s&&(t._d3s.remove(),t._d3s=null),!1)})),o=this.svgGraph.selectAll("."+i);s&&(o=o.transition().duration(s.duration).ease(s.ease));var a=this;o.attr("d",(function(t){var i=t.y2?r.y2:r.y,s=e.line().x((function(t){return r.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),s=t.style||{};for(var r in s)i.style(r,s[r]);if(!("stroke"in s)){var n=a.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof n?n(t):n)}}));var l=this.svgGraph.selectAll(".sg-temporary-line").data(n).enter().append("path").attr("series",(function(t){return t.series})).attr("class",i).style("opacity",s?0:1).style("fill","none").attr("d",(function(t){var i=t.y2?a.y2:a.y,s=e.line().x((function(t){return a.x.scale(t[0])})).y((function(t){return i.scale(t[1])})).curve(t.interpolate);return t._segments.reduce((function(t,e){return(t||"")+(e.length<2?"":" "+s(e))}),"")})).each((function(t){var i=e.select(this),r=t.style||{};for(var n in r)(!s||n&&"opacity"!=n.toLowerCase())&&i.style(n,r[n]);if(!("stroke"in r)){var o=a.getColorBySeriesName(t.series,!0);i.style("stroke","function"==typeof o?o(t):o)}t._d3s=i}));s&&(s.duration=s.duration||200,s.ease=s.ease||e.easePolyOut,l.transition().duration(s.duration).ease(s.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}}(g,l),function(t,e){t.prototype.removeAreas=function(t){return null==t?this.svgGraph.selectAll(".sg-area").remove():(removed=Array.isArray(t)?t:[t],this.svgGraph.selectAll(".sg-area").filter((function(e){return~t.indexOf(e.series)})).remove()),this},t.prototype.drawAreas=function(t,e){var i=this;return this.removeAreas(),t||0===t?t<=2&&(t=2):t=20,this.areas?(this.areas.forEach((function(t){t.functions?t._parts=i._getAreasPolysFromFunctions(t.functions[0],t.functions[1],t.resolution,t.xRange,t.y2,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?t._parts=[t.coords]:t._parts=i._getAreaPolysFromCoordinates(t.coords,t.y2),t._parts&&(t._parts=t._parts.filter((function(t){return t&&t.length>=2})))})),this._drawAreas(t,e),this):this},t.prototype.drawUpdateAreas=function(t,e){var i=this;return t||0===t?t<=2&&(t=2):t=20,this.areas.forEach((function(t){t.functions?t._parts=i._getAreasPolysFromFunctions(t.functions[0],t.functions[1],t.resolution,t.xRange,t.y2,!i.allowDrawBeyondGraph):i.allowDrawBeyondGraph?t._parts=[t.coords]:t._parts=i._getAreaPolysFromCoordinates(t.coords,t.y2),t._parts&&(t._parts=t._parts.filter((function(t){return t&&t.length>=2})))})),this._updateAreas(e),this},t.prototype._drawAreas=function(t,i){var s=this;if(this.areas){var r=this,n=this.svgGraph.selectAll(".sg-temporary-area").data(this.areas).enter().append("path").attr("series",(function(t){return t.series})).attr("class","sg-area").style("opacity",i?0:1).attr("d",(function(t){var i=t.y2?s.y2:s.y,r=e.area().x((function(t){return s.x.scale(t[0])})).y0((function(t){return i.scale(t[1])})).y1((function(t){return i.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(t){var s=e.select(this),n=t.style||{};for(var o in n)(!i||o&&"opacity"!=o.toLowerCase())&&s.style(o,n[o]);if(!("fill"in n)){var a=r.getColorBySeriesName(t.series,!0);s.style("fill","function"==typeof a?a(t):a)}t._d3s=s}));i&&(Object.getPrototypeOf(i)!==Object.prototype&&(i={}),i.duration=i.duration||200,i.ease=i.ease||e.easePolyOut,n.transition().duration(i.duration).ease(i.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}},t.prototype._updateAreas=function(t){var i=this;if(this.areas){t&&(Object.getPrototypeOf(t)!==Object.prototype&&(t={}),t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut);var s=this.areas.filter((function(t){return t._parts&&t._parts.length&&!t._parts.filter((function(t){return t.length<2})).length?!t._d3s:(segments._d3s&&(t._d3s.remove(),t._d3s=null),!1)})),r=this.svgGraph.selectAll(".sg-area");t&&(r=r.transition().duration(t.duration).ease(t.ease));var n=this;r.attr("d",(function(t){var s=t.y2?i.y2:i.y,r=e.area().x((function(t){return i.x.scale(t[0])})).y0((function(t){return s.scale(t[1])})).y1((function(t){return s.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(t){var i=e.select(this),s=t.style||{};for(var r in s)i.style(r,s[r]);if(!("fill"in s)){var o=n.getColorBySeriesName(t.series,!0);i.style("fill","function"==typeof o?o(t):o)}}));var o=this.svgGraph.selectAll(".sg-temporary-area").data(s).enter().append("path").attr("series",(function(t){return t.series})).attr("class","sg-area").style("opacity",t?0:1).attr("d",(function(t){var s=t.y2?i.y2:i.y,r=e.area().x((function(t){return i.x.scale(t[0])})).y0((function(t){return s.scale(t[1])})).y1((function(t){return s.scale(t[2])})).curve(t.interpolate);return t._parts.reduce((function(t,e){return e.length<2?t:t+" "+r(e)}),"")})).each((function(i){var s=e.select(this),r=i.style||{};for(var o in r)(!t||o&&"opacity"!=o.toLowerCase())&&s.style(o,r[o]);if(!("fill"in r)){var a=n.getColorBySeriesName(i.series,!0);s.style("fill","function"==typeof a?a(i):a)}i._d3s=s}));t&&(t.duration=t.duration||200,t.ease=t.ease||e.easePolyOut,o.transition().duration(t.duration).ease(t.ease).style("opacity",(function(t){return t.style&&"opacity"in t.style?t.style.opacity:1})))}}}(g,l),function(t,e){t.prototype.addTooltipToPoints=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-point").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype.addTooltipToLines=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-line").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype.addTooltipToAreas=function(t,e,i){return e=e&&!Array.isArray(e)?[e]:e,this.svgGraph.selectAll(".sg-area").filter((function(t){return!e||~e.indexOf(t.series)})).call(this._constructTooltipFunctionality(t,i)),this},t.prototype._constructTooltipFunctionality=function(t,i){var s=this.svgGraph.node();return function(r){if(!r)return null;i||(i={});var n,o=e.select("body"),a=i.offset||[15,15],l=r._groups[0];r.on("mouseover.sg-tooltip",(function(t,r){var c,h=e.pointer(t,o.node());for(var u in n?c={left:h[0]+a[0]+"px",top:h[1]+a[1]+"px"}:(o.selectAll(".sg-tooltip").remove(),(n=o.append("div")).attr("class","sg-tooltip"),c={position:"absolute",left:h[0]+a[0]+"px",top:h[1]+a[1]+"px","z-index":1001,"background-color":"#fff",border:"1px solid #777","border-radius":"4px",padding:"4px 6px","font-family":"'Century Gothic', CenturyGothic, Geneva, AppleGothic, sans-serif","font-size":"12px"}),c)n.style(u,c[u]);if(i.style)for(var p in i.style)n.style(p,i.style[p]);i.mouseover&&i.mouseover(r,e.pointer(t,s),l)})).on("mousemove.sg-tooltip",(function(i,r){if(n){var c=e.pointer(i,o.node());n.style("left",c[0]+a[0]+"px").style("top",c[1]+a[1]+"px");var h=null;t&&(h=t(r,e.pointer(i,s),l)),h?n.html(h):(n.remove(),n=null)}})).on("mouseout.sg-tooltip",(function(t,r){i.mouseout&&i.mouseout(r,e.pointer(t,s),l),n&&(n.remove(),n=null)}))}},t.prototype.highlightPoints=function(t,e,i,s,r){var n=".sg-point";t&&(n+="[series='"+t+"']");var o=this;return this.svgGraph.selectAll(n).each((function(t,n,a){if(!e||e(t)){var l=o.x.scale,c=t.y2?o.y2.scale:o.y.scale;i||(i=t.wasNull?0:"function"==typeof t.pointsize?t.pointsize():t.pointsize),s||(s=t.wasNull?"none":o.getColorBySeriesName(t.series,!0));var h=i||t.pointsize;"function"==typeof h&&(h=h.call(t));var u=o.svgGraph.append("rect").attr("class","sg-point-highlight").attr("width",h).attr("height",h).attr("x",l(t.x)-h/2).attr("y",c(t.y)-h/2).attr("transform","rotate(45,"+l(t.x)+","+c(t.y)+")").style("fill",s);if(r)for(var p in r)u.style(p,r[p])}})),this},t.prototype.removeHighlightPoints=function(){return this.svgGraph.selectAll(".sg-point-highlight").remove(),this},t.prototype.removeHighlights=function(){return this.removeHighlightPoints(),this}}(g,l),function(t,e){t.prototype.removeHighlights=function(){return this.removeHighlightPoints().removeHighlightLines().removeHighlightAreas()},t.prototype.removeHighlightPoints=function(){return this.svgGraph.selectAll(".sg-point-highlight").remove(),this.svgGraph.selectAll(".sg-point.sg-highlight-hide").style("opacity","").classed("sg-highlight-hide",!1),this},t.prototype.removeHighlightLines=function(){return this.svgGraph.selectAll(".sg-line-highlight").remove(),this.svgGraph.selectAll(".sg-line.sg-highlight-hide").style("opacity","").classed("sg-highlight-hide",!1),this},t.prototype.removeHighlightAreas=function(){return this.svgGraph.selectAll(".sg-area-highlight").remove(),this.svgGraph.selectAll(".sg-area.sg-highlight-hide").style("opacity","").classed("sg-highlight-hide",!1),this},t.prototype._addBlurDefn=function(){this.svgDefs.select("#sg-effect-blur").empty()&&this.svgDefs.append("filter").attr("id","sg-effect-blur").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",6)},t.prototype.highlightPoints=function(t){var i=this;return(t=t||{}).series&&(t.series=Array.isArray(t.series)?t.series:[t.series]),this.svgGraph.selectAll(".sg-point").each((function(s,r,n){if((!t.series||~t.series.indexOf(s.series))&&(!t.filter||t.filter(i._clonePointData(s),n[r]))){var o=e.select(n[r].cloneNode(!0)).attr("class","sg-point-highlight"),a=i.x.scale,l=s.y2?i.y2.scale:i.y.scale,c=a(s.x),h=l(isNaN(s.y)?0:s.y),u=t.size||s.size;switch("function"==typeof u&&(u=u.call(s)),i.ptSeriesShapes[s.series]){case"triangle":case"triangle-up":u*=2,o.attr("points",(function(t){var e=1.519676*u,i=.86602*e*.5,s=.5*e;return"".concat(c-s,",").concat(h-i," ").concat(c,",").concat(h+i," ").concat(c+s,",").concat(h-i)}));break;case"triangle-down":u*=2,o.attr("points",(function(t){var e=1.519676*u,i=.86602*e*.5,s=.5*e;return"".concat(c-s,",").concat(h+i," ").concat(c,",").concat(h-i," ").concat(c+s,",").concat(h+i)}));break;case"square":case"diamond":o.attr("width",u).attr("height",u).attr("x",c-u/2).attr("y",h-u/2);break;default:o.attr("r",u)}if(t.nooutline||(o.style("stroke","#000"),o.style("stroke-width","1")),t.style)for(var p in t.style)o.style(p,t.style[p]);o.style("pointer-events","none"),i.svgGraph.node().append(o.node()),e.select(n[r]).classed("sg-highlight-hide",!0).style("opacity","0")}})),this},t.prototype.highlightLines=function(t){var i=this;return(t=t||{}).series&&(t.series=Array.isArray(t.series)?t.series:[t.series]),this._addBlurDefn(),this.svgGraph.selectAll(".sg-line").each((function(s,r,n){if((!t.series||~t.series.indexOf(s.series))&&(!t.filter||t.filter(i._cloneLineData(s),n[r]))){var o=e.select(n[r].cloneNode(!0)).attr("class","sg-point-highlight"),a=null;if(!t.noblur){if(a=e.select(n[r].cloneNode(!0)).attr("class","sg-line-highlight").attr("filter","url('#sg-effect-blur')").style("fill","none").style("filter","brightness(135%)").style("opacity","0.7"),t.blurstyle)for(var l in t.blurstyle)a.style(l,t.blurstyle[l]);a.style("pointer-events","none"),i.svgGraph.node().append(a.node())}if(t.style)for(var c in t.style)o.style(c,t.style[c]);o.style("pointer-events","none"),i.svgGraph.node().append(o.node()),e.select(n[r]).classed("sg-highlight-hide",!0).style("opacity","0")}})),this},t.prototype.highlightAreas=function(t){var i=this;return(t=t||{}).series&&(t.series=Array.isArray(t.series)?t.series:[t.series]),this.svgGraph.selectAll(".sg-area").each((function(s,r,n){if((!t.series||~t.series.indexOf(s.series))&&(!t.filter||t.filter(i._cloneAreaData(s),n[r]))){var o=e.select(n[r].cloneNode(!0)).attr("class","sg-point-highlight").style("opacity","1");if(t.nooutline||(o.style("stroke","#000"),o.style("stroke-width","1.5")),t.style)for(var a in t.style)o.style(a,t.style[a]);o.style("pointer-events","none"),i.svgGraph.node().append(o.node()),e.select(n[r]).classed("sg-highlight-hide",!0).style("opacity","0")}})),this}}(g,l),g.prototype.clearAllData=function(t){return this.clearPointsData(t),this.clearLinesData(t),this.clearAreasData(t),this},g.prototype.removeAll=function(t){return this.removePoints(t).removeAllLines(t).removeAreas(t),this},g.prototype.saveAsPng=function(t){t||(t="graph.png"),t.toLowerCase().endsWith(".png")||(t+=".png");var e=this.svg.attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").node();serializer=new XMLSerializer,svgHtml=serializer.serializeToString(e),canvas=document.createElement("canvas"),canvas.style.display="none",canvas.width=this.containerWidth,canvas.height=this.containerHeight;var i=document.createElement("a");i.style.display="none",i.download=t,this.svg.node().parentNode.appendChild(i);var s=new Image;s.onload=function(){canvas.getContext("2d").drawImage(s,0,0),i.href=canvas.toDataURL("image/png"),i.click(),i.parentElement.removeChild(i),canvas.remove()},s.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(svgHtml)))};const m=g;exports.SimpleGraph=o.default})();